## API

### Login
POST
http://localhost:8080/api/login

```json
{
    "id": "testuser123",
    "password": "password123"
}
```

### Register
POST
http://localhost:8080/api/register

```json
{
    "id": "testuser123",
    "password": "password123",
    "name": "홍길동2",
    "birthDate": "1995-01-01",
    "gender": "남성",
    "address": "서울시 강남구",
    "phoneNumber": "010-1234-5678",
    "email": "test@example.com",
    "schoolName": "테스트대학교",
    "majorName": "컴퓨터공학과",
    "entranceYear": "2015",
    "graduationYear": "2019",
    "academicStatus": "졸업",
    "skills": ["Java", "Spring", "React"],
    "desiredPositions": ["백엔드 개발자", "풀스택 개발자"],
    "portfolioUrl": "https://github.com/testuser123",
    "introduction": "안녕하세요. 백엔드 개발자를 희망하는 홍길동입니다."
}
```

### Article
POST
http://localhost:8081/api/articles

**Header**
- Key: Authorization
- Value: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0dXNlcjEyMyIsInVzZXJuYW1lIjoi7ZmN6ri464-ZMiIsImlhdCI6MTczMjQ0NTYxOCwiZXhwIjoxNzMyNTMyMDE4fQ.ONNMdF6gQykRAT_VnPhW6uF-_IIkrUwdGDk0StWa0y8X1Ei7qh69e5JrDfs7yFlzAKWC9tWHclaLMPxZjCiB4w // 로그인해서 받은 token 값

```json
{
    "title": "테스트 제목2",
    "content": "테스트 내용2",
    "username": "홍길동2" 
}
```

## 실행방법

- .env 파일에 아래와 같이 JWT_SECRET, JWT_EXPIRATION 설정 (양 서버에 모두 필요)
```
JWT_SECRET=7134743777217A25432A462D4A614E645267556B58703272357538782F413F44
JWT_EXPIRATION=86400000
```

- Docker Desktop에서 Sequence와 SequenceBoard 이름의 mariadb 서버 실행

- WSL 에서 Redis 서버 실행
  * sudo service redis-server start
  * sudo service redis-server status
  * redis-cli ping

- 위 API 요청들로 API 요청 테스트

- 종료 시 Redis 서버 종료
  * sudo service redis-server stop
  * redis-cli shutdown
  * sudo killall redis-server

--------

## 사용 개념

### MSA 구조
- 8080: Login, Register를 관리하는 서버
- 8081: Article 게시판 기능을 관리하는 서버

### 보안
- JWT 기반 인증 처리, 8081 서버에서 8080서버로의 검증 요청
1. 토큰의 유효성 검사(서명, 만료여부 등)
2. 토큰에서 username 추출
3. 추출된 username과 요청의 username이 일치하는지 8080 서버에서 확인

### Redis
- Redis를 통해 여러번 외부 포트에 요청을 보내지 않아도 된다.
- Redis 서버를 활성화하면 요청으로 받은 토큰을 검증하기 위해 외부포트로 요청을 보냈을 때 받은 결과값을 캐시메모리에 저장한다.
  1. 토큰 받음
  2. Redis 캐시메모리에 해당 토큰이 있는지 검사
  3. 있다면 그 결과값을 사용, 없다면 외부 포트로 요청

